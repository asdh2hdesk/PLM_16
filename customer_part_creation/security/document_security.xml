<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- document_security.xml -->


    <record model="ir.module.category" id="cpc_category" >
        <field name="name">Customer Part Creation</field>
        <field name="description">Customer Part Creation System Categories</field>
    </record>


    <record id="group_document_user" model="res.groups">
        <field name="name">Document User</field>
        <field name="category_id" ref="customer_part_creation.cpc_category"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="group_document_manager" model="res.groups">
        <field name="name">Document Manager</field>
        <field name="implied_ids" eval="[(4, ref('group_document_user'))]"/>
        <field name="users" eval="[(4, ref('base.user_admin'))]"/>
        <field name="category_id" ref="customer_part_creation.cpc_category"/>
    </record>
    
    <record id="group_document_admin" model="res.groups">
        <field name="name">Document Admin</field>
        <field name="implied_ids" eval="[(4, ref('group_document_manager'))]"/>
        <field name="users" eval="[(4, ref('base.user_admin'))]"/>
        <field name="category_id" ref="customer_part_creation.cpc_category"/>
    </record>

    <record id="group_document_approver" model="res.groups">
        <field name="name">Document Approver</field>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        <field name="users" eval="[(4, ref('base.user_admin'))]"/>
        <field name="category_id" ref="customer_part_creation.cpc_category"/>
    </record>

    <!-- Allow all users to see all documents -->
    <record id="document_control_all_rule" model="ir.rule">
        <field name="name">All Users: See All Documents</field>
        <field name="model_id" ref="model_document_control"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('group_document_user'))]"/>
    </record>

    <!-- Allow all users to see all revisions -->
    <record id="document_revision_all_rule" model="ir.rule">
        <field name="name">All Users: See All Revisions</field>
        <field name="model_id" ref="model_document_revision"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('group_document_user'))]"/>
    </record>

    <record model="ir.model.access" id="access_document_control_category">
        <field name="name">document.control.category</field>
        <field name="model_id" ref="model_document_category"/>
        <field name="group_id" ref="group_document_manager"/>
        <field name="perm_read">1</field>
        <field name="perm_write">1</field>
        <field name="perm_create">1</field>
        <field name="perm_unlink">1</field>
    </record>
</odoo>